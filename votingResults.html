<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="pageTitle">Voting Results</title>
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    
    <link rel="stylesheet" href="src/votingResults.css">
</head>
<body>
    <div class="taskbar">
        <div class="taskbar-left">
            <a href="home.html" class="taskbar-icon" title="Home">
                <i class="bi-house"></i>
            </a>
        </div>
        <div class="taskbar-right">
            <a href="profileEditor.html" class="taskbar-icon" title="Profile">
                <i class="bi-person"></i>
            </a>
        </div>
    </div>

    <div class="main-container">
        <h1 id="motionTitle" class="motion-title">Loading Motion Name...</h1>
        
        <div class="content-wrapper">
            <div class="chart-container">
                <canvas id="votePieChart"></canvas>
                <div id="voteSummary"></div>
            </div>
        </div>
        
        <div class="bottom-section">
            <div class="motion-description-box">
                <h2>Motion Description</h2>
                <p id="motionDescription">Loading description...</p>
            </div>
        </div>
    </div>
    
    <a href="home.html" class="back-button">
        Back to Meeting
    </a>

    <script src="src/votingResults.js"></script>
    <script>
        // (JavaScript content remains unchanged)
        const motion = window.motionData;

        // 1. Set the Title and Description
        document.getElementById('motionTitle').textContent = motion.motionName;
        document.getElementById('motionDescription').textContent = motion.motionDescription;
        document.getElementById('pageTitle').textContent = motion.motionName + ' - Results';

        // 2. Render the Pie Chart
        const yesColor = '#4CAF50'; // Green for Yes
        const noColor = '#F44336';  // Red for No
        
        const ctx = document.getElementById('votePieChart').getContext('2d');
        new Chart(ctx, {
            type: 'pie',
            data: {
                labels: ['Yes Votes', 'No Votes'],
                datasets: [{
                    data: [motion.yesVotes, motion.noVotes],
                    backgroundColor: [
                        yesColor, 
                        noColor 
                    ],
                    hoverOffset: 4
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'top',
                    },
                    tooltip: {
                         callbacks: {
                            label: function(context) {
                                let label = context.label || '';
                                if (label) {
                                    label += ': ';
                                }
                                if (context.parsed !== null) {
                                    label += context.parsed + ' votes';
                                }
                                return label;
                            }
                        }
                    }
                }
            }
        });
        
        // 3. Display vote summary
        const totalVotes = motion.yesVotes + motion.noVotes;
        const yesPercent = totalVotes > 0 ? ((motion.yesVotes / totalVotes) * 100).toFixed(1) : 0;
        const noPercent = totalVotes > 0 ? ((motion.noVotes / totalVotes) * 100).toFixed(1) : 0;
        
        document.getElementById('voteSummary').innerHTML = `
            <p><strong>Total Votes:</strong> ${totalVotes}</p>
            <p style="color: ${yesColor};"><strong>Yes:</strong> ${motion.yesVotes} (${yesPercent}%)</p>
            <p style="color: ${noColor};"><strong>No:</strong> ${motion.noVotes} (${noPercent}%)</p>
        `;
    </script>
</body>
</html>