<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Robert's Rules Meeting Minutes</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
        href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"
        rel="stylesheet"
    />
    <style>
        /* Define a custom font */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #878E76; /* UPDATED: New body background color */
            /* Add margin to the top to account for the fixed taskbar */
            padding-top: 80px; 
        }
        /* Custom class for the new header color */
        .bg-dark-header {
            background-color: #555; /* UPDATED: New header background color */
        }
        /* Custom scrollbar for aesthetic, if supported */
        #motion-list-container, #motion-details {
            scrollbar-width: thin;
            scrollbar-color: #588157 #f7f7f7;
        }
        .motion-item:hover {
            background-color: #e9ecef;
        }
        .motion-item.active {
            background-color: #588157;
            color: white;
        }
        .motion-item.active .time-badge, .motion-item.active .result-badge {
            background-color: white;
            color: #588157;
            font-weight: 700;
        }
        .time-badge {
            background-color: #d8f8e1;
            color: #4a755a;
        }
        .result-badge {
            background-color: #fff3cd;
            color: #856404;
        }
        
        /* --- TASKBAR STYLES --- */
        .taskbar {
            background-color: #555;
            color: white;
            padding: 10px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: 8px;
            position: fixed;
            top: 16px;
            left: 16px;
            right: 16px;
            z-index: 1000;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .taskbar-icon {
            color: white;
            text-decoration: none;
            font-size: 1.5rem;
            padding: 5px;
            transition: color 0.2s;
        }

        .taskbar-icon:hover {
            color: #bbdb9b; /* A light, contrasting color on hover */
        }

        .taskbar-left .taskbar-icon {
            margin-right: 15px;
        }

        .taskbar-right .taskbar-icon {
            margin-left: 15px;
        }
        /* --- END OF TASKBAR STYLES --- */

        /* Adjust the header to be static and centered */
        header {
            position: static;
            padding: 0; /* Remove header padding as we'll pad the content inside */
        }
    </style>
</head>
<body class="min-h-screen">
    <script>
        // --- 4. JAVASCRIPT DATA STRUCTURE ---
        const motionData = [
            {
                id: 1,
                time: "9:05 AM",
                title: "Motion to Approve Previous Minutes",
                result: "Passed",
                description: "Mr. Jones moved to approve the minutes from the previous meeting (September 2025) as distributed via email.",
                voting_results: { yes: 15, no: 0, abstain: 2 },
                chair_summary: "The minutes were approved without any amendments. Process was quick and clean.",
            },
            {
                id: 2,
                time: "9:15 AM",
                title: "Motion to Allocate $500 for New Supplies",
                result: "Passed",
                description: "Ms. Chen moved that the organization allocate $500 from the general fund to purchase new stationery and office supplies, effective immediately.",
                voting_results: { yes: 14, no: 3, abstain: 0 },
                chair_summary: "A brief discussion occurred regarding specific vendors, but the motion was approved with minor opposition.",
            },
            {
                id: 3,
                time: "9:45 AM",
                title: "Motion to Postpone Vote on Bylaws Amendments",
                result: "Failed",
                description: "Mr. Smith moved to postpone consideration of the proposed bylaws amendments until the next regular meeting in November.",
                voting_results: { yes: 6, no: 11, abstain: 0 },
                chair_summary: "The motion failed, indicating strong sentiment to proceed with the amendments today. The main motion remains on the floor.",
            },
            {
                id: 4,
                time: "10:05 AM",
                title: "Motion to Amend Bylaws, Article IV, Section 2",
                result: "Passed (2/3)",
                description: "The main question regarding the amendment to require a 2/3rds vote for special funds allocation was put to a vote.",
                voting_results: { yes: 13, no: 4, abstain: 0 },
                chair_summary: "The motion required a 2/3rds majority (12 votes needed) and passed easily. The bylaws are amended as stated.",
            }
        ];

        let activeMotionId = motionData.length > 0 ? motionData[0].id : null; // Start with the first motion selected
        
        // --- JAVASCRIPT LOGIC ---

        // Function to render the chronological list of motions
        function renderMotionList() {
            const listContainer = document.getElementById('motion-list-container');
            listContainer.innerHTML = ''; // Clear existing content

            motionData.forEach(motion => {
                const item = document.createElement('div');
                item.className = `motion-item p-4 border-b border-gray-200 cursor-pointer transition duration-150 rounded-lg shadow-sm mb-2 ${motion.id === activeMotionId ? 'active' : ''}`;
                item.setAttribute('data-motion-id', motion.id);
                item.onclick = () => showMotionDetails(motion.id);
                
                const timeBadge = `<span class="time-badge text-xs font-semibold px-2 py-0.5 rounded-full">${motion.time}</span>`;
                const resultBadge = `<span class="result-badge text-xs font-medium px-2 py-0.5 rounded-full ${motion.result === 'Passed' || motion.result.includes('2/3') ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'}">${motion.result}</span>`;
                
                item.innerHTML = `
                    <div class="flex items-center justify-between mb-2">
                        <div class="flex space-x-2">
                            ${timeBadge}
                            ${resultBadge}
                        </div>
                    </div>
                    <h3 class="font-bold text-lg">${motion.title}</h3>
                `;
                listContainer.appendChild(item);
            });

            // Ensure the initial details are loaded
            if (activeMotionId !== null) {
                showMotionDetails(activeMotionId);
            }
        }

        // Function to show the details of the selected motion
        function showMotionDetails(motionId) {
            const detailsContainer = document.getElementById('motion-details');
            const motion = motionData.find(m => m.id === motionId);

            // Update active state in the list
            document.querySelectorAll('.motion-item').forEach(item => {
                item.classList.remove('active');
            });
            document.querySelector(`[data-motion-id="${motionId}"]`).classList.add('active');
            activeMotionId = motionId;

            if (!motion) {
                detailsContainer.innerHTML = '<p class="text-gray-500 p-8">Select a motion from the list to view details.</p>';
                return;
            }

            detailsContainer.innerHTML = `
                <div class="p-8">
                    <h2 class="text-3xl font-extrabold text-gray-800 mb-2">${motion.title}</h2>
                    <div class="flex space-x-4 mb-6 text-sm font-semibold">
                        <span class="px-3 py-1 rounded-full bg-indigo-100 text-indigo-700">Time: ${motion.time}</span>
                        <span class="px-3 py-1 rounded-full ${motion.result.includes('Passed') ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'}">${motion.result}</span>
                    </div>

                    <h3 class="text-xl font-semibold mt-6 mb-2 text-gray-700 border-b pb-1">Motion Description</h3>
                    <p class="text-gray-600 mb-6 leading-relaxed">${motion.description}</p>

                    <h3 class="text-xl font-semibold mt-6 mb-2 text-gray-700 border-b pb-1">Voting Results</h3>
                    <div class="grid grid-cols-3 gap-4 text-center mb-6">
                        <div class="p-3 bg-blue-50 rounded-lg shadow-sm">
                            <p class="text-2xl font-bold text-blue-800">${motion.voting_results.yes}</p>
                            <p class="text-sm text-blue-600">Yes</p>
                        </div>
                        <div class="p-3 bg-red-50 rounded-lg shadow-sm">
                            <p class="text-2xl font-bold text-red-800">${motion.voting_results.no}</p>
                            <p class="text-sm text-red-600">No</p>
                        </div>
                        <div class="p-3 bg-yellow-50 rounded-lg shadow-sm">
                            <p class="text-2xl font-bold text-yellow-800">${motion.voting_results.abstain}</p>
                            <p class="text-sm text-yellow-600">Abstain</p>
                        </div>
                    </div>

                    ${motion.chair_summary ? `
                        <h3 class="text-xl font-semibold mt-6 mb-2 text-gray-700 border-b pb-1">Chair's Summary</h3>
                        <div class="p-4 bg-gray-50 border-l-4 border-green-500 rounded-lg shadow-inner">
                            <p class="text-gray-700 italic">${motion.chair_summary}</p>
                        </div>
                    ` : ''}

                </div>
            `;
        }
        
        // Placeholder function for Export/Download
        function exportMinutes() {
            alert('Download functionality is a placeholder. You would implement file generation here!');
            // To make this functional, you would stringify the motionData array and trigger a browser download.
        }

        // Initialize the app when the DOM is ready
        document.addEventListener('DOMContentLoaded', renderMotionList);
    </script>

    <div class="taskbar">
        <div class="taskbar-left">
          <a href="home.html" class="taskbar-icon" title="Home">
            <i class="bi-house"></i>
          </a>
        </div>
        <div class="taskbar-right">
          <a href="profileEditor.html" class="taskbar-icon" title="Profile">
            <i class="bi-person"></i>
          </a>
        </div>
    </div>
    <header>
        <div class="max-w-7xl mx-auto flex justify-center py-4">
            <div class="bg-dark-header text-white p-4 rounded-lg shadow-lg">
                <h1 class="text-xl font-bold">Meeting Minutes (Q4 Session)</h1>
            </div>
        </div>
    </header>

    <div class="max-w-7xl mx-auto p-4 grid grid-cols-1 lg:grid-cols-3 gap-6">

        <div class="lg:col-span-1 bg-white rounded-xl shadow-lg h-[80vh] overflow-y-auto">
            <div class="p-4 bg-gray-50 border-b rounded-t-xl sticky top-0 z-10">
                <h2 class="text-lg font-bold text-gray-700">Chronological Motion Index</h2>
            </div>
            <div id="motion-list-container" class="p-3">
                <p class="text-center text-gray-500 p-8">Loading motions...</p>
            </div>
        </div>

        <div class="lg:col-span-2 bg-white rounded-xl shadow-lg h-[80vh] overflow-y-auto" id="motion-details">
            <p class="text-gray-500 p-8">Select a motion from the index to view its full details, voting record, and the Chair's summary.</p>
        </div>

    </div>

    <div class="max-w-7xl mx-auto p-4 flex justify-center mt-4 mb-8">
        <button 
            id="export-button" 
            onclick="exportMinutes()" 
            class="px-6 py-3 bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg shadow-xl transition duration-200 transform hover:scale-105">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline-block mr-2" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L10 11.586l2.293-2.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd" />
                <path fill-rule="evenodd" d="M10 2a1 1 0 011 1v7a1 1 0 11-2 0V3a1 1 0 011-1z" clip-rule="evenodd" />
            </svg>
            Export/Download Minutes
        </button>
    </div>
</body>
</html>